{"version":3,"file":"smtp-settings.js","mappings":";;;;;;;;;;;AAAA;;;;;;;;;;;ACAA;;;;;;UCAA;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;;;;;WCtBA;WACA;WACA;WACA,eAAe,4BAA4B;WAC3C,eAAe;WACf,iCAAiC,WAAW;WAC5C;WACA;;;;;WCPA;WACA;WACA;WACA;WACA,yCAAyC,wCAAwC;WACjF;WACA;WACA;;;;;WCPA,8CAA8C;;;;;WCA9C;WACA;WACA;WACA,uDAAuD,iBAAiB;WACxE;WACA,gDAAgD,aAAa;WAC7D;;;;;;;;;;;;;;ACNgC;AACY;AAE5CA,+DAAY,CAACA,iFAA8B,CAACG,MAAM,CAACC,aAAa,CAACC,KAAK,CAAC,CAAC;AAExE,MAAMC,SAAS,GAAG,MAAM;EACvBC,OAAO,CAACC,GAAG,CAAC,gBAAgB,CAAC;;EAE7B;EACA,IAAIC,QAAQ,CAACC,aAAa,CAAC,oBAAoB,CAAC,EAAE;IACjD;IACAD,QAAQ,CAACE,gBAAgB,CAAC,SAAS,EAAGC,CAAC,IAAK;MAC3C,IAAIA,CAAC,CAACC,OAAO,IAAID,CAAC,CAACE,GAAG,KAAK,GAAG,EAAE;QAC/BF,CAAC,CAACG,cAAc,EAAE;QAClBN,QAAQ,CAACC,aAAa,CAAC,4BAA4B,CAAC,CAACM,KAAK,EAAE;MAC7D;IACD,CAAC,CAAC;EACH;EAEA,SAASC,cAAc,CAACC,QAAQ,EAAEC,OAAO,EAAE;IAC1CD,QAAQ,CAACR,aAAa,CAAC,iBAAiB,CAAC,CAACU,KAAK,CAACC,OAAO,GAAGF,OAAO,GAC9D,WAAW,GACX,MAAM;IACTD,QAAQ,CAACR,aAAa,CAAC,iBAAiB,CAAC,CAACU,KAAK,CAACC,OAAO,GAAGF,OAAO,GAC9D,WAAW,GACX,MAAM;EACV;EAEA,MAAMG,mBAAmB,GAAGb,QAAQ,CAACC,aAAa,CAAC,oBAAoB,CAAC;EACxE,MAAMa,mBAAmB,GAAGd,QAAQ,CAACC,aAAa,CACjD,6CAA6C,CAC7C;EAEDO,cAAc,CAACM,mBAAmB,EAAED,mBAAmB,CAACE,OAAO,CAAC;EAEhEF,mBAAmB,CAACX,gBAAgB,CAAC,OAAO,EAAE,MAAM;IACnDM,cAAc,CAACM,mBAAmB,EAAED,mBAAmB,CAACE,OAAO,CAAC;EACjE,CAAC,CAAC;EAEF,MAAMN,QAAQ,GAAGT,QAAQ,CAACC,aAAa,CAAC,yBAAyB,CAAC;EAClE,MAAMe,WAAW,GAAGhB,QAAQ,CAACC,aAAa,CAAC,yBAAyB,CAAC;EAErEQ,QAAQ,CAACP,gBAAgB,CAAC,QAAQ,EAAGC,CAAC,IAAK;IAC1CA,CAAC,CAACG,cAAc,EAAE;IAClB,MAAMW,QAAQ,GAAG,IAAIC,QAAQ,CAACf,CAAC,CAACgB,MAAM,CAAC;IACvC,MAAMC,IAAI,GAAG,CAAC,CAAC;IACfA,IAAI,CAACxB,KAAK,GAAGF,MAAM,CAACC,aAAa,CAACC,KAAK;IAEvC,KAAK,MAAM,CAACS,GAAG,EAAEgB,KAAK,CAAC,IAAIJ,QAAQ,CAACK,OAAO,EAAE,EAAE;MAC9CF,IAAI,CAACf,GAAG,CAAC,GAAGgB,KAAK;IAClB;IAEA9B,2DAAQ,CAAC;MACRgC,IAAI,EAAE,uBAAuB;MAC7BC,MAAM,EAAE,MAAM;MACdJ;IACD,CAAC,CAAC,CAACK,IAAI,CAAEC,CAAC,IAAK;MACd,IAAIA,CAAC,CAACC,OAAO,EAAE;QACd7B,OAAO,CAACC,GAAG,CAAC2B,CAAC,CAACC,OAAO,CAAC;QAEtBX,WAAW,CAACY,SAAS,GAAGF,CAAC,CAACC,OAAO;MAClC,CAAC,MAAM;QACN7B,OAAO,CAACC,GAAG,CAAC2B,CAAC,CAAC;MACf;IACD,CAAC,CAAC;EACH,CAAC,CAAC;EAEF,MAAMG,iBAAiB,GAAG7B,QAAQ,CAAC8B,cAAc,CAAC,iBAAiB,CAAC;EACpE,MAAMC,cAAc,GAAG/B,QAAQ,CAAC8B,cAAc,CAAC,eAAe,CAAC;EAC/D,MAAME,cAAc,GAAGhC,QAAQ,CAAC8B,cAAc,CAAC,eAAe,CAAC;EAC/D,MAAMG,cAAc,GAAGjC,QAAQ,CAAC8B,cAAc,CAAC,eAAe,CAAC;EAE/DD,iBAAiB,CAAC3B,gBAAgB,CAAC,QAAQ,EAAGC,CAAC,IAAK;IACnD,MAAM+B,UAAU,GAAG/B,CAAC,CAACgB,MAAM,CAAChB,CAAC,CAACgB,MAAM,CAACgB,aAAa,CAAC;IACnD,IAAID,UAAU,EAAE;MACf,MAAME,SAAS,GAAGpC,QAAQ,CAACC,aAAa,CACvC,QAAQ,GAAGiC,UAAU,CAACG,OAAO,CAACC,IAAI,CAClC;MACDF,SAAS,CAACrB,OAAO,GAAG,IAAI;MACxBiB,cAAc,CAACX,KAAK,GAAGa,UAAU,CAACG,OAAO,CAACE,IAAI;MAC9CN,cAAc,CAACZ,KAAK,GAAGa,UAAU,CAACG,OAAO,CAACG,IAAI;IAC/C;EACD,CAAC,CAAC;AACH,CAAC;AAED9C,MAAM,CAAC+C,MAAM,GAAG5C,SAAS,EAAE,C","sources":["webpack://cf7-smtp/./src/styles/settings.scss?731a","webpack://cf7-smtp/external window [\"wp\",\"apiFetch\"]","webpack://cf7-smtp/webpack/bootstrap","webpack://cf7-smtp/webpack/runtime/compat get default export","webpack://cf7-smtp/webpack/runtime/define property getters","webpack://cf7-smtp/webpack/runtime/hasOwnProperty shorthand","webpack://cf7-smtp/webpack/runtime/make namespace object","webpack://cf7-smtp/./src/cf7-smtp-settings.js"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport {};","module.exports = window[\"wp\"][\"apiFetch\"];","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import './styles/settings.scss';\nimport apiFetch from '@wordpress/api-fetch';\n\napiFetch.use(apiFetch.createNonceMiddleware(window.smtp_settings.nonce));\n\nconst smtpAdmin = () => {\n\tconsole.log('smtp-mail init');\n\n\t/* This is the code that saves the settings when the user presses ctrl-s. */\n\tif (document.querySelector('#cf7-smtp-settings')) {\n\t\t// save on ctrl-s keypress\n\t\tdocument.addEventListener('keydown', (e) => {\n\t\t\tif (e.ctrlKey && e.key === 's') {\n\t\t\t\te.preventDefault();\n\t\t\t\tdocument.querySelector('#cf7-smtp-settings #submit').click();\n\t\t\t}\n\t\t});\n\t}\n\n\tfunction enableAdvanced(formElem, enabled) {\n\t\tformElem.querySelector('tr:nth-child(3)').style.display = enabled\n\t\t\t? 'table-row'\n\t\t\t: 'none';\n\t\tformElem.querySelector('tr:nth-child(4)').style.display = enabled\n\t\t\t? 'table-row'\n\t\t\t: 'none';\n\t}\n\n\tconst smtpAdvancedOptions = document.querySelector('#cf7_smtp_advanced');\n\tconst formAdvancedSection = document.querySelector(\n\t\t'#cf7-smtp-settings .form-table:last-of-type'\n\t);\n\n\tenableAdvanced(formAdvancedSection, smtpAdvancedOptions.checked);\n\n\tsmtpAdvancedOptions.addEventListener('click', () => {\n\t\tenableAdvanced(formAdvancedSection, smtpAdvancedOptions.checked);\n\t});\n\n\tconst formElem = document.querySelector('#sendmail-testform form');\n\tconst responseBox = document.querySelector('#sendmail-response code');\n\n\tformElem.addEventListener('submit', (e) => {\n\t\te.preventDefault();\n\t\tconst formData = new FormData(e.target);\n\t\tconst data = {};\n\t\tdata.nonce = window.smtp_settings.nonce;\n\n\t\tfor (const [key, value] of formData.entries()) {\n\t\t\tdata[key] = value;\n\t\t}\n\n\t\tapiFetch({\n\t\t\tpath: '/cf7-smtp/v1/sendmail',\n\t\t\tmethod: 'POST',\n\t\t\tdata,\n\t\t}).then((r) => {\n\t\t\tif (r.message) {\n\t\t\t\tconsole.log(r.message);\n\n\t\t\t\tresponseBox.innerHTML = r.message;\n\t\t\t} else {\n\t\t\t\tconsole.log(r);\n\t\t\t}\n\t\t});\n\t});\n\n\tconst formSelectDefault = document.getElementById('cf7_smtp_preset');\n\tconst formSelectAuth = document.getElementById('cf7-smtp-auth');\n\tconst formSelectHost = document.getElementById('cf7_smtp_host');\n\tconst formSelectPort = document.getElementById('cf7_smtp_port');\n\n\tformSelectDefault.addEventListener('change', (e) => {\n\t\tconst selectedEl = e.target[e.target.selectedIndex];\n\t\tif (selectedEl) {\n\t\t\tconst authRadio = document.querySelector(\n\t\t\t\t'.auth-' + selectedEl.dataset.auth\n\t\t\t);\n\t\t\tauthRadio.checked = true;\n\t\t\tformSelectHost.value = selectedEl.dataset.host;\n\t\t\tformSelectPort.value = selectedEl.dataset.port;\n\t\t}\n\t});\n};\n\nwindow.onload = smtpAdmin();\n"],"names":["apiFetch","use","createNonceMiddleware","window","smtp_settings","nonce","smtpAdmin","console","log","document","querySelector","addEventListener","e","ctrlKey","key","preventDefault","click","enableAdvanced","formElem","enabled","style","display","smtpAdvancedOptions","formAdvancedSection","checked","responseBox","formData","FormData","target","data","value","entries","path","method","then","r","message","innerHTML","formSelectDefault","getElementById","formSelectAuth","formSelectHost","formSelectPort","selectedEl","selectedIndex","authRadio","dataset","auth","host","port","onload"],"sourceRoot":""}