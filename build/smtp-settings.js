!function(){"use strict";var e={n:function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,{a:n}),n},d:function(t,n){for(var o in n)e.o(n,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:n[o]})},o:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}},t=window.wp.apiFetch,n=e.n(t);n().use(n().createNonceMiddleware(window.smtp_settings.nonce)),window.onload=(()=>{function e(e,t,n){e.forEach((e=>{t.querySelector(`tr:nth-child(${e})`).style.display=n?"table-row":"none"}))}document.querySelector("#cf7-smtp-settings")&&document.addEventListener("keydown",(e=>{e.ctrlKey&&"s"===e.key&&(e.preventDefault(),document.querySelector("#cf7-smtp-settings #submit").click())}));const t=document.querySelector("#cf7_smtp_enabled"),o=document.querySelector("#cf7-smtp-settings .form-table:first-of-type");e([2,3,4,5,6,7],o,t.checked),t.addEventListener("click",(()=>{e([2,3,4,5,6,7],o,t.checked)}));const c=document.querySelector("#cf7_smtp_advanced"),s=document.querySelector("#cf7-smtp-settings .form-table:last-of-type");e([3,4],s,c.checked),c.addEventListener("click",(()=>{e([3,4],s,c.checked)}));const r=document.querySelector("#sendmail-testform form"),a=document.querySelector("#sendmail-response pre");function d(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const n=new Date;e.innerHTML=`<code class="logdate alignright">Log start ${n}</code>`+t}function i(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;(t=t.split(/\n/)).length&&t.forEach((t=>{setTimeout((()=>{e.insertAdjacentHTML("beforeend",`<code>${t}</code>`)}),100+100*Math.random())})),n?(e.classList.remove("error"),e.classList.add("ok")):!1===n&&(e.classList.remove("ok"),e.classList.add("error"))}d(a,"<code>Mail Server initialization completed!</code>"),r.addEventListener("submit",(e=>{e.preventDefault();const t=new FormData(e.target),o={};o.nonce=window.smtp_settings.nonce;for(const[e,n]of t.entries())o[e]=n;d(a),n()({path:"/cf7-smtp/v1/sendmail",method:"POST",data:o}).then((e=>{i(a,"Waiting for server response... ⏰",!0),console.log(e),i(a,e.message+"\r\n** END **\r\n","sent"===e.status)})).catch((e=>{setTimeout((function(){n()({path:"/cf7-smtp/v1/get_errors",method:"POST",data:{nonce:e.nonce}}).then((t=>{if(console.log(t.message),t.message.errors){const n=t.message.errors.wp_mail_failed.join("\r\n");i(a,n+"\r\n"+e.message+"\r\n** END **",!1)}})).catch((e=>console.log(e)))}),2e3)}))}));const l=document.getElementById("cf7_smtp_preset"),m=document.getElementById("cf7_smtp_host"),u=document.getElementById("cf7_smtp_port");l.addEventListener("change",(e=>{const t=e.target[e.target.selectedIndex];t&&(document.querySelector(".auth-"+t.dataset.auth).checked=!0,m.value=t.dataset.host,u.value=t.dataset.port)}))})()}();